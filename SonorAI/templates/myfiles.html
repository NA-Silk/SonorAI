{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SonorAI - My Files</title>
    <link rel="stylesheet" href="{% static 'styles.css' %}">
</head>

<body>
    <!-- Navigation bar -->
    <div id="app">
        <div class="page active">
            <div class="page-container">

                <!-- Header -->
                <header class="header">
                    <div class="logo-box">
                        <a href="/" class="logo-text">SonorAI</a>
                    </div>

                    <nav class="nav-buttons">
                        <a href="{% url 'homepage' %}" class="nav-btn">Home</a>
                        {% if user.is_authenticated %}
                        <a href="{% url 'myfiles' %}" class="nav-btn">My Files</a>
                        <a href="{% url 'logout' %}" class="nav-btn">Logout</a>
                        {% else %}
                        <a href="{% url 'register' %}" class="nav-btn">Register</a>
                        <a href="{% url 'login' %}" class="nav-btn">Login</a>
                        {% endif %}
                    </nav>
                </header>

                <!-- Files Section -->
                <div class="files-content">

                    <!-- Header -->
                    <div class="files-header-bar">
                        <div class="files-logo">
                            <img src="{% static 'SonorAI_logo.png' %}" alt="My Files Image">
                        </div>
                        <p class="files-title">My Files</p>
                    </div>

                    <!-- Files Container -->
                    <div class="files-card">
                        <div class="files-body">
                            
                            {% if files %}
                                {% for file in files %}

                                    <!-- File Data -->
                                    <div class="file-item-card">
                                        <div class="file-item-left">
                                            <p class="file-name">{{ file.title }}</p>
                                            <p class="file-date">{{ file.creation_date }}</p>
                                        </div>

                                        <!-- Actions -->
                                        <div class="file-item-right">
                                            <!-- Rename -->
                                            <form action="{% url 'rename_myfiles' file.pk %}" method="post" class="rename-form">
                                                {% csrf_token %}
                                                <input type="text" name="name" value="{{ file.title }}" class="rename-input">
                                                <button type="submit" class="file-btn rename-btn">Rename</button>
                                            </form>
                                            <!-- Download -->
                                            <a href="{% url 'download_musicxml' file.pk %}" class="file-btn">Download</a>
                                            <!-- Delete -->
                                            <a href="{% url 'delete_myfiles' file.pk %}" class="file-btn delete-btn">Delete</a>
                                        </div>
                                    </div>

                                {% endfor %}
                            {% else %}
                                <p class="no-files-text">No saved files found.</p>
                            {% endif %}

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
